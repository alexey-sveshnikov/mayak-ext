(()=>{"use strict";var e,t={8957:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=i(o(7294)),u=l(o(677)),s=i(o(351)),d=o(1225),f=o(1479),h=o(3643),p=l(o(2791)),m=o(4382),v=(()=>{const e=new Map;for(const t of window.skuMapping)e.set(t.new_utk_id,t.old_utk_id);return()=>e})();t.default=function(e){const[t,o]=(0,c.useState)(!1),n=(0,c.useRef)(null),[r,i]=(0,c.useState)(null),[l,u]=(0,c.useState)([]),[x,P]=(0,c.useState)([]),[O,I]=(0,c.useState)([]),E=v(),j=window.location.host.match(/adm\.utkonos\.ru/),A="lo"===s.get("CanaryReleaseRouteV4"),M=!j&&A,R=e.promocode;var S,C,N;S=e=>"Escape"==e.key,C=()=>o(!t),N=[t],(0,c.useEffect)((()=>{const e=e=>{S(e)&&C()};return document.addEventListener("keyup",e),()=>{document.removeEventListener("keyup",e)}}),N);const T=(0,c.useCallback)((()=>{u([]);const e=[];n.current&&setTimeout((()=>{if(!n.current)return;var t;n.current&&(function(e){let t;const o=document.createNodeIterator(e,NodeFilter.SHOW_ALL);for(;t=o.nextNode();)t.removeAttribute&&t.removeAttribute("style")}(t=n.current),function(e){let t;const o=document.createNodeIterator(e,NodeFilter.SHOW_ALL);for(;t=o.nextNode();)"A"==t.tagName&&t.setAttribute("target","_blank")}(t));const{cartItems:o,rejectedRows:r,withCounts:i}=(0,d.extractData)(n.current);if(i||u(["ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ñ‚ÑŒ ÐºÐ¾Ð»Ð¾Ð½ÐºÑƒ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ñ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð°Ð¼Ð¸ â€“ Ð²ÐµÐ·Ð´Ðµ Ð±ÑƒÐ´ÑƒÑ‚ '1'",...e]),!M)for(const e of o)E.has(e.id)&&(e.originalId=e.id,e.id=E.get(e.id),e.mapped=!0,console.log(`mapped ${e.name}: ${e.originalId} to ${e.id}`));I(r),P(o)}),100)}),[n,l]),D=(0,c.useCallback)((()=>a(this,void 0,void 0,(function*(){R&&(M?h.utkonosNewAPI:f.utkonosLegacyAPI,i("Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿Ñ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´"),yield f.utkonosLegacyAPI.cartPromocodeAdd(R),i(""),u(["ÐŸÑ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ð»Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ! Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ!",...l]))}))),[R,M,l]),q=(0,c.useCallback)((()=>{u([]);const e=[];(()=>a(this,void 0,void 0,(function*(){console.log("adding items",x);const e=M?h.utkonosNewAPI:f.utkonosLegacyAPI;let t=0,o=0;for(const n of x){t++,i(`${t} Ð¸Ð· ${x.length}`);try{yield e.modifyCartItem(n),o++}catch(e){console.log("item is failed to save: ",n),console.log("error was: ",e),e instanceof m.UtkonosAPIException&&(n.error=e.message,P([...x]))}}i("Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿Ñ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´");try{yield D()}catch(e){console.log("failed to apply promocode",e),alert("ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: "+e)}return o})))().then((t=>{u([`Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ${t} Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ð¸Ð· ${x.length}.`,"Ð¢Ð¾Ð²Ð°Ñ€Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð¼ÐµÑ‡ÐµÐ½Ñ‹ ÐºÑ€Ð°ÑÐ½Ñ‹Ð¼ Ñ†Ð²ÐµÑ‚Ð¾Ð¼","Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ðµ Ð±ÑƒÐ´ÑƒÑ‚ Ð²Ð¸Ð´Ð½Ñ‹ Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹",...e]),i(null)})).catch((e=>{i(null),console.log("failed to save",e),alert(`ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ: ${e}`)}))}),[D,x]);return c.default.createElement(c.default.StrictMode,null,t&&c.default.createElement(g,{className:"utkonos-ext-root"},x.length>0&&c.default.createElement(p.default,{items:x,rejectedRows:O}),0==x.length&&c.default.createElement(y,{contentEditable:!0,ref:n,onPaste:T}),c.default.createElement(b,null,c.default.createElement("div",null,M?"Ð’ÐµÑ€ÑÐ¸Ñ ÑÐ°Ð¹Ñ‚Ð° Ð½Ð¾Ð²Ð°Ñ":"Ð’ÐµÑ€ÑÐ¸Ñ ÑÐ°Ð¹Ñ‚Ð° ÑÑ‚Ð°Ñ€Ð°Ñ"),R&&c.default.createElement("div",null,"Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¿Ñ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´ ",R),l.map((e=>c.default.createElement("div",{key:e},e)))),c.default.createElement(w,{onClick:q,disabled:!!r||!x.length},null!=r?r:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ"),x.length>0&&c.default.createElement(k,{onClick:()=>{P([]),I([])}},"âŒ")),c.default.createElement(_,{onClick:()=>o(!t)}))};const g=u.default.div`
  position: fixed;
  width: 600px;
  height: 80vh;
  top: calc(50% - 40vh);
  right: 5px;
  background: #ffd9d9;
  z-index: 1000;
  border: 1px solid #555;
  border-radius: 7px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  overflow: hidden;
`,y=u.default.div`
  height: 100%;
  width: 100%;
  border-radius: 7px;
  background: white;
  overflow: scroll;
  
  font-size: 0.8em;
  
  padding: 5px 10px;
`,b=u.default.div`
  font-size: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,w=u.default.button`
  margin: 5px;
  border: 1px solid black;
  border-radius: 3px;
`,_=u.default.div`
  position: fixed;
  height: 73px;
  width: 36px;
  top: 0;
  right: 0;
  z-index: 1000;
  background: url(https://mayak.help/wp-content/themes/mayak/img/logo.png);
  transform: scale(0.8);
  -webkit-transform-origin-x: right;
  -webkit-transform-origin-y: top;
`,k=u.default.a`
  display: block;
  position: absolute;
  top: 0;
  right: 10px;
  width: 1em;
  height: 1em;
  padding: 5px;
  background: white;
  border-radius: 4px;
  line-height: 17px;
  font-size: 14px;
  
  opacity: 0.6;
  transition: all .2s ease-in-out;
  
  &:hover {
    opacity: 1;
    transform: scale(1.1);
  }
`},2791:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=i(o(7294)),c=a(o(677));t.default=function({items:e,rejectedRows:t}){const o=(0,l.useCallback)((e=>e.error?"#ffb0b0":e.warning?"lightgrey":e.mapped?"lightblue":"white"),[]);return l.default.createElement(u,null,t&&l.default.createElement("table",null,t),e.map((e=>{return l.default.createElement(s,{key:e.id,style:{background:o(e)}},l.default.createElement(f,null,l.default.createElement(h,{style:{flex:"1 1 100%"}},l.default.createElement(d,{href:`/item/${e.id}/`,target:"_blank"},e.name)),l.default.createElement(h,null,e.quantity,"Â ÑˆÑ‚"),l.default.createElement(h,null,l.default.createElement(d,{href:`/search/${encodeURI((t=e.name,t.replace(/Ð²ÐµÑ Ð´Ð¾.+/,"").replace(/,.+/,"")))}`,target:"_blank"},"ðŸ”Ž"))),e.error&&l.default.createElement(p,null,e.error),e.warning&&l.default.createElement(m,null,"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾"));var t})))};const u=c.default.div`
  display: flex;
  flex-direction: column;
  background: #444;
  overflow: auto;
  overscroll-behavior: contain;
  gap: 1px;
  width: 100%;
`,s=c.default.div`
  flex: 0 0 3em;
  padding: 8px;
  background: white;
  
  display: flex;
  flex-direction:column;
  gap: 9px;
`,d=c.default.a`
  text-decoration: none;
  color: black;
`,f=c.default.div`
  display: flex;
  justify-content: space-between;
  gap: 10px;
`,h=c.default.div`
  display: flex
`,p=c.default.div`
  font-weight: 500;
  color: black;
`,m=c.default.div`
  font-size: 1.2em;
`},5311:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(7294)),i=n(o(3935)),a=n(o(8957)),l=new URLSearchParams(document.currentScript.src.split("?")[1]).get("promocode")||"";console.log(`[utkonos-ext] initializing (with promocode: "${l}")`);const c=document.createElement("div");document.body.appendChild(c),i.default.render(r.default.createElement(a.default,{promocode:l}),c)},923:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extractFromTable=void 0;const n=o(9385);o(8446),o(4788),o(6026),t.extractFromTable=function(e){var t;const[o,r]=function(e){const t=(0,n.doXpath)(".//tr",e),o=[];for(const e of t){const t=[];for(const o of e.childNodes){const e=document.evaluate(".//a",o,null,XPathResult.ANY_TYPE).iterateNext();null!==e&&e instanceof HTMLElement&&t.push(e.getAttribute("href")||""),t.push(o.textContent||"")}o.push(t)}return[o,t]}(e);if(0==o.length)return{cartItems:[],rejectedRows:[]};console.log("table data"),console.table(o);const i=function(e){var t;let o=e.map((e=>e.map((e=>e.replace(/\s*(ÑˆÑ‚ÑƒÐº|ÑˆÑ‚)\.?\s*/gi,"")))));o=o.filter((e=>e.filter((e=>!isNaN(parseFloat(null==e?void 0:e.trim())))).length>0));const n=Math.round(o.map((e=>e.filter((e=>!!(null==e?void 0:e.trim()))).length)).reduce(((e,t)=>e+t),0)/o.length);o=o.filter((e=>e.filter((e=>!!(null==e?void 0:e.trim()))).length==n)),console.log("Detecting quantities column. This is the filtered data"),console.table(o);for(let e=0;e<(null===(t=o[0])||void 0===t?void 0:t.length);e++){const t=o.map((t=>t[e])),n=t.map((e=>parseFloat(null==e?void 0:e.trim())));if(void 0!==n.find(isNaN)){console.log(`column ${e} is not all numbers`);continue}if(n.every(((e,t)=>0===t||e>n[t-1]))){console.log(`column ${e} looks like a row numbers`);continue}const r=n.reduce(((e,t)=>e+t),0)/t.length,i=n.filter((e=>Math.round(e)==e)).length/t.length;if(r<15&&i>.5)return console.log(`column ${e} seems to have a quantities`),e;console.log(`column ${e} ignored. Average value: ${r}, rate of rounded values: ${i})`)}}(o);if(void 0===i)return console.log("can't find quantities column"),{cartItems:[],rejectedRows:[]};const a=[],l=[];for(let e=0;e<o.length;e++){const n=o[e];if(0==n.filter((e=>!isNaN(parseFloat(null==e?void 0:e.trim())))).length){console.log("filter out possible header of footer row: ",n);continue}let c=!1,u=parseInt(n[i]);u||(console.log(`can't parse quantity from column ${i}. Using default value. Row: `,n),u=1,c=!0);const s=n.find((e=>-1!=e.indexOf("utkonos.ru")));if(!s){console.log("can't find link for this row",n),l.push(r[e]);continue}const d=parseInt((null===(t=s.match(/utkonos\.ru\/item\/(\d+)/))||void 0===t?void 0:t[1])||"");if(!d){console.log(`can't find ID for this link: ${s}, row: `,n),l.push(r[e]);continue}const f=new RegExp(/[Ð°-ÑÐ-Ð¯]{5,}/),h=n.find((e=>-1!==e.replace(/\s+/,"").search(f)));a.push({id:d,quantity:u,name:h||s,tableRow:r[e],warning:c})}return{cartItems:a,rejectedRows:l}}},3187:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extractFromUnstructuredText=void 0;const n=o(9385);t.extractFromUnstructuredText=function(e){const t=[],o=(0,n.doXpath)(".//a",e);for(const e of o)if(e instanceof HTMLElement){const o=e.getAttribute("href");o&&t.push(o)}const r=t.join("\n")+e.textContent,i=[],a=new Set;for(const e of r.matchAll(/utkonos\.ru\/item\/(\d+)/g)){const t=e[1];a.has(t)||(a.add(t),i.push({id:parseInt(t),quantity:1,name:`https://utkonos.ru/item/${t}/`}))}return i}},1225:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extractData=void 0;const n=o(923),r=o(3187);t.extractData=function(e){if(1==document.evaluate("count(.//table)",e,null,XPathResult.NUMBER_TYPE).numberValue){const{cartItems:t,rejectedRows:o}=(0,n.extractFromTable)(e);if(t.length>0)return{withCounts:!0,cartItems:t,rejectedRows:o}}return{cartItems:(0,r.extractFromUnstructuredText)(e),rejectedRows:[],withCounts:!1}}},9620:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uuidv4=void 0,t.uuidv4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}},9385:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.doXpath=void 0,t.doXpath=function(e,t,o=XPathResult.ORDERED_NODE_ITERATOR_TYPE){const n=[],r=document.evaluate(e,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE);let i=r.iterateNext();for(;i;)i instanceof HTMLElement&&n.push(i),i=r.iterateNext();return n}},1479:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.utkonosLegacyAPI=void 0;const l=i(o(351)),c=o(9620),u=o(4382);t.utkonosLegacyAPI=new class{saveCartBulk(e){return a(this,void 0,void 0,(function*(){const t=[],o=[];for(const n of e)t.push(n.id.toString()),o.push(n.quantity);const n={GoodsItemId:t,Count:o,UseDelta:0,Return:{Cart:"0",CartItemList:"0",TotalCost:"0"}};return this.makeRequest("cartItemMultiAdd",n)}))}modifyCartItem(e){var t,o,n;return a(this,void 0,void 0,(function*(){const r=yield this.makeRequest("cartItemModify",{GoodsItemId:e.id.toString(),Quantity:e.quantity,Return:{Cart:1,CartItemList:0,TotalCost:0},Source:null,SourceId:null}),i=null===(n=null===(o=null===(t=(r.Body.CartList||[])[0])||void 0===t?void 0:t.CartNotices)||void 0===o?void 0:o.CartNoticeList[0])||void 0===n?void 0:n.Description;if(i)throw new u.UtkonosAPIException(i);return r}))}goodsItemSearchByid(e){return a(this,void 0,void 0,(function*(){const t={Id:e.toString(),Return:{BrandInfo:1}};return this.makeRequest("goodsItemSearchByid",t)}))}cartPromocodeAdd(e){return a(this,void 0,void 0,(function*(){yield this.makeRequest("cartPromocodeAdd",{Code:e})}))}makeRequest(e,t){return a(this,void 0,void 0,(function*(){const o=JSON.parse(localStorage.getItem("device_data")||"{}"),n=yield l.get("Utk_SessionToken"),r=window.location.host,i={Head:{DeviceId:o.device_id,Domain:r,RequestId:(0,c.uuidv4)().replaceAll(/-/g,""),MarketingPartnerKey:"mp-cc3c743ffd17487a9021d11129548218",Version:"utkonos-ext",Client:"utkonos-ext",Method:e,Store:"utk",SessionToken:n},Body:t};console.log("[legacy API] sending request to method",e,i);const a=new FormData;a.append("request",JSON.stringify(i));const s=yield fetch(`https://${r}/api/rest/${e}`,{headers:{accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9,ru;q=0.8","cache-control":"no-cache",pragma:"no-cache","sec-ch-ua":'"Chromium";v="106", "Google Chrome";v="106", "Not;A=Brand";v="99"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"},referrer:`https://${r}/`,referrerPolicy:"no-referrer-when-downgrade",body:a,method:"POST",mode:"cors",credentials:"include"}),d=yield s.json();if(console.log("response: ",d),d.Body.ErrorList)throw new u.UtkonosAPIException(d.Body.ErrorList[0].Description);return d}))}}},3643:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.utkonosNewAPI=void 0;const l=i(o(351)),c=o(9620),u=o(4382);t.utkonosNewAPI=new class{modifyCartItem(e){var t,o,n;return a(this,void 0,void 0,(function*(){const r=yield this.makeRequest("cartItemModify",{GoodsItemId:e.id,Quantity:e.quantity,Return:{Cart:0,Goods:0}}),i=null===(n=null===(o=null===(t=r.Body.CartList[0])||void 0===t?void 0:t.CartNotices)||void 0===o?void 0:o.CartNoticeList[0])||void 0===n?void 0:n.Description;if(i)throw new u.UtkonosAPIException(i);return r}))}cartPromocodeAdd(e){return a(this,void 0,void 0,(function*(){yield this.makeRequest("cartPromocodeAdd",{Code:e})}))}makeRequest(e,t){return a(this,void 0,void 0,(function*(){const o=yield l.get("Utk_SessionToken"),n={Head:{DeviceId:yield l.get("Utk_DvcGuid"),SessionToken:o,RequestId:(0,c.uuidv4)().replaceAll(/-/g,""),MarketingPartnerKey:"mp80-661295c9cbf9d6b2f6428414504a8deed3020641",Version:"utkonos-ext",Client:"utkonos-ext",Method:e,Domain:"moscow",Store:"utk"},Body:t};console.log("[new API] sending request to method",e,n);const r=`request=${JSON.stringify(n)}`,i=yield fetch(`https://www.utkonos.ru/api/rest/${e}`,{headers:{Accept:"application/json, text/plain, */*","Accept-Language":"en-US,en;q=0.9,ru;q=0.8","Content-Type":"application/x-www-form-urlencoded","sec-ch-ua":'"Google Chrome";v="107", "Chromium";v="107", "Not=A?Brand";v="24"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-retail-brand":"utk"},referrer:"https://www.utkonos.ru/",referrerPolicy:"no-referrer-when-downgrade",body:r,method:"POST",mode:"cors",credentials:"include"});if(!i.ok)throw new u.UtkonosAPIException(i.statusText);const a=yield i.json();if(console.log("response: ",a),a.Body.ErrorList)throw new u.UtkonosAPIException(a.Body.ErrorList[0].Message);return a}))}}},4382:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UtkonosAPIException=void 0;class o extends Error{constructor(e){super(e),this.name="UtkonosAPIException"}}t.UtkonosAPIException=o}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,e=[],n.O=(t,o,r,i)=>{if(!o){var a=1/0;for(s=0;s<e.length;s++){for(var[o,r,i]=e[s],l=!0,c=0;c<o.length;c++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](o[c])))?o.splice(c--,1):(l=!1,i<a&&(a=i));if(l){e.splice(s--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[o,r,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.j=575,(()=>{var e={575:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[a,l,c]=o,u=0;if(a.some((t=>0!==e[t]))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(c)var s=c(n)}for(t&&t(o);u<a.length;u++)i=a[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(s)},o=self.webpackChunkutkonos_ext=self.webpackChunkutkonos_ext||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),n.nc=void 0;var r=n.O(void 0,[736],(()=>n(5311)));r=n.O(r)})();